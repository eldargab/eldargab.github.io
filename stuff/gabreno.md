---
layout: minimal
title : Автоматическая классификация обращений
---

<style>
    @media print {
        table {
            page-break-inside: avoid;
        }

        .break-before {
            page-break-before: always;
        }

        h1, h2, h3, h4, h5, h6 {
            page-break-after: avoid; /* Browsers do not respect this... */
        }

        .nobreak {
            page-break-inside: avoid;
        }

        pre, blockquote {
            page-break-inside: avoid;
        }
    }
</style>


# Автоматическая классификация обращений

* [Введение](#введение)
* [Преимущества](#преимущества)
* [Схема работы](#схема-работы)
* [Системно-аппаратные требования](#системно-аппаратные-требования)
* [Требования к системе ServiceDesk](#требования-к-системе-servicedesk)
* [Статистика обработки обращений в компании ЭнергоДата](#статистика-обработки-обращений-в-компании-энергодата)
* [Заключение](#заключение)


{:.break-before}
# Введение

Данный документ описывает программный продукт, позволяющий значительно упростить деятельность централизованной службы поддержки
путем автоматического распределения новых обращений по группам ответственных специалистов.

Алгоритм распределения основан на поиске и выявлении статистических закономерностей в текстах обращений.
Для его настройки не требуется знаний предметной области, не требуется ввода правил вида `ЕСЛИ..., ТО...`,
необходимо лишь достаточное количество обучающих примеров в формате `ТЕКСТ - ГРУППА ПОДДЕРЖКИ`.

{:.break-before}
# Преимущества

В зависимости от специфики, внедрение автоматической классификации несёт следующие преимущества:

1. [Экономия трудозатрат на сортировку обращений](#экономия-трудозатрат-на-сортировку)
2. [Уменьшение времени доставки обращения ответственному специалисту](#уменьшение-времени-доставки-обращения)
3. [Повышение уровня конфиденциальности](#повышение-уровня-конфиденциальности)
4. [Создание единой точки приёма обращений](#создание-единой-точки-приёма-обращений).

## Экономия трудозатрат на сортировку

Деятельность, связанная с сортировкой обращений, как правило, с одной стороны
относится к категории низкооплачиваемой, с другой - характерная для неё высокая текучесть
вынуждает крупные компании тратить значительные средства
на привлечение и обучение новых сотрудников.

Автоматическая сортировка позволяет сократить оба вида издержек.

## Уменьшение времени доставки обращения

Уменьшение времени доставки обращения ответственному специалисту означает увеличение скорости решения инцидента.

Эффект, как правило, заметен в случаи внештатных ситуаций, когда резко возросший поток обращений в одну из групп поддержки
препятствует своевременной обработке всех остальных. В этом случаи автоматическая классификация позволяет сократить время простоя
как обратившегося сотрудника, так и специалиста поддержки.

## Повышение уровня конфиденциальности

В отдельных случаях, уменьшение среднего количества человек, задействованных в решении инцидента,
может привести к повышению уровня конфиденциальности.

<div class="nobreak" markdown="1">
## Создание единой точки приёма обращений

Крупные компании с широкой сферой деятельности и крупной сетью подрядчиков
могут столкнуться с трудностями при организации единой точки приёма обращений
по причине отсутствия достаточного количества сотрудников способных
идентифицировать каждую проблему и направить её нужному специалисту.

Автоматическая классификация снимает это ограничение.
</div>

<div class="nobreak break-before" markdown="1">
# Схема работы

![Схема](https://eldargab.github.io/stuff/scheme.png)

На рисунке выше представлена общая схема работы решения. Здесь

* _Service Desk_ - Система управления инциндентами, такая как BMC Remedy, HP ServiceDesk и прочие
* _База знаний_ - Файл со статистической моделью текстов обращений
* _Сервис классификации_ - SOAP/REST WEB-сервис классификации
* _Тренер_ - Процесс, отвечающий за построение базы знаний.

Направление стрелок указывает на отношение _использует (вызывает)_.
</div>

{:.break-before}
# Системно-аппаратные требования

Решение может работать под управлением операционных систем

* Windows Vista и новее
* Linux (Ubuntu, RedHat, CentOS 6+, и другие)
* macOS 10.10+

и требует следующих ресурсов

* 1 ядро процессора x86-64 с тактовой частотой не менее 1.5 ГГц
* 512 Мб оперативной памяти
* 5 Гб дискового пространства,

обеспечивая при этом скорость обработки до 5000 обращений в секунду.

Возможности системы линейно масштабируются выделением дополнительных
ядер и оперативной памяти из расчёта 200 Мб на ядро.

# Требования к системе ServiceDesk

Система ServiceDesk должна предоставлять WEB-сервис, позволяющий
получать актуальные и корректные данные для тренировки.

В случаи BMC Remedy, все необходимые настройки могут быть выполненны
администратором в течении 1 рабочего дня.

{:.break-before}
# Статистика обработки обращений в компании ЭнергоДата

В данном разделе представлены результаты двух экспериментов.
Первый эксперимент является виртуальным и моделирует использование классификатора для
сортировки обращений в течении 2017 года. Второй - представляет результаты опытно-промышленной
эксплуатации в период с 3 по 7 сентября 2018.

<div class="nobreak" markdown="1">
### Термины и сокращения, используемые для характеристики результатов классификации

|Термин|Определение |
|------|------------|
|ИП|Кол-во истинно-положительных срабатываний, т.е. случаев, когда обращение было назначено верно.|
|ЛП|Кол-во ложно-положительных срабатываний, т.е. случаев, когда обращение было отправлено в чужую группу поддержки.|
|Объём|Общее кол-во обращений поступивших для классификации.|
|Точность|`ИП / (ИП + ЛП)`|
|Полнота|`ИП / Объём`|

Рассмотрим следующий пример. Пусть для классификации поступило 1000 обращений.
Из них 800 было отсортировано верно, 100 было отправлено в чужую группу поддержки,
оставшиеся 100 были направлены операторам call-центра как сомнительные. В этом случае

```
Объём = 1000
ИП = 800
ЛП = 100
Точность = 800 / (800 + 100) = 89 %
Полнота  = 800 / 1000 = 80 %
```

Посредством настройки в определённых пределах можно увеличить точность за счёт
уменьшения полноты и, наоборот, увеличить полноту за счёт уменьшения точности.
Баланс между точностью и полнотой задаётся на этапе тренировки и, в случае нашего решения,
может быть подобран для каждой группы индивидуально.

</div>

{:.break-before}
## Статистика за 2017 год

### Особенности работы call-центра

В 2017 году первая линия поддержки состояла из 20 служб.
Характерно, что многие из них имели весьма близкие, пересекающиеся
сферы ответственности  и состояли из высококвалифицированных специалистов.

<div class="nobreak" markdown="1">
### Общий итог

<table style="width: auto">
<tbody>
<tr><td style="font-weight: bold">Объём</td><td style="text-align: right;">102100</td></tr>
<tr><td style="font-weight: bold">ИП</td><td style="text-align: right;">72366</td></tr>
<tr><td style="font-weight: bold">ЛП</td><td style="text-align: right;">4901</td></tr>
<tr><td style="font-weight: bold">Точность %</td><td style="text-align: right;">93.6</td></tr>
<tr><td style="font-weight: bold">Полнота %</td><td style="text-align: right;">70.9</td></tr>
</tbody>
</table>

</div>

<div class="nobreak" markdown="1">
### Итоги в разрезе групп

| Группа поддержки             |  Объём |    ИП |   ЛП |  Точность % |Полнота % |
|:-----------------------------|-------:|------:|-----:|------------:|---------:|
| НСИ                          |  24811 | 22719 |  799 |          97 |       92 |
| АС УиО SAPFI                 |  13772 |  6992 |  771 |          90 |       51 |
| Администрирование SAP систем |  12823 | 11464 |  650 |          95 |       89 |
| АС УиО SAPLO                 |   8407 |  3796 |  709 |          84 |       45 |
| HR                           |   7362 |  6315 |  164 |          97 |       86 |
| АСУ-Казначейство             |   5935 |  3501 |  528 |          87 |       59 |
| АСУ ЗИД                      |   4225 |  2759 |  130 |          96 |       65 |
| МНСИ                         |   4149 |  3474 |  206 |          94 |       84 |
| АС УиО SAPAA                 |   3721 |  2661 |  225 |          92 |       72 |
| АСПБ                         |   2937 |  1659 |  177 |          90 |       56 |
| КИСУ Закупки                 |   2821 |  2299 |   77 |          97 |       81 |
| PPM                          |   2317 |  1824 |  110 |          94 |       79 |
| АСУ ТОиР                     |   2249 |  1010 |  196 |          84 |       45 |
| Внутренней ИТ-инфраструктуры |   1076 |   842 |   62 |          93 |       78 |
| АС УиО SAPNU                 |    822 |   314 |   51 |          86 |       38 |
| АСУ ДСЗЗ                     |    524 |   222 |   23 |          91 |       42 |
| Корпоративный портал ФСК     |    480 |   324 |   13 |          96 |       68 |
| АСУ Имущество                |    347 |   191 |   10 |          95 |       55 |

</div>

<div class="nobreak" markdown="1">
### Изменение точности и полноты в течении года

![Точность и полнота](https://eldargab.github.io/stuff/2017_stats.svg)

Низкий показатель полноты в первые 3 недели объясняется
нетипично-высокой долей группы _АС УиО SAPFI_ и малым количеством обращений.

Падение полноты классификации на 7-ой неделе связано с внедрением _АСУ ЗИД_.
_АСУ ЗИД_ - проект из области логистики на время опытно-промышленной эксплуатации
которого была создана отдельная группа поддержки. В период накопления данных
по новой группе классификатор направлял все относящиеся к ней обращения
в группу логистики. В подобных случаях классификатор адаптируется к новым
правилам медленнее, чем специалист call-центра.
</div>

<div class="nobreak" markdown="1">
### Вариативность загрузки call-центра

![Вариативность загрузки](https://eldargab.github.io/stuff/2017_load_variance.svg)

Как видно из гистограммы выше, нагрузка на call-центр варьировалась
относительно своего среднего несколько сильнее чем общий поток  обращений.
</div>

{:.break-before}
## ОПЭ 3 - 7 сентября 2018

### Особенности работы call-центра

В период опытно-промышленной эксплуатации с 3 по 7 сентября 2018 года
первая линия поддержки состояла из 11 групп, при этом
95% обращений приходилось на 6 из них.

Характерно, что 10% от общего потока составляли обращения не входящие
в зону ответственности компании и поступившие из системы управления
инцидентами заказчика по ошибке. В виду крайней нежелательности
ложных возвратов, такие обращения направлялись
операторам call-центра наряду с сомнительными и неизвестными.

<div class="nobreak" markdown="1">
### Общий итог

<table style="width: auto">
<tbody>
<tr><td style="font-weight: bold">Объём</td><td style="text-align: right;">1680</td></tr>
<tr><td style="font-weight: bold">ИП</td><td style="text-align: right;">1159</td></tr>
<tr><td style="font-weight: bold">ЛП</td><td style="text-align: right;">120</td></tr>
<tr><td style="font-weight: bold">Точность %</td><td style="text-align: right;">90.6</td></tr>
<tr><td style="font-weight: bold">Полнота %</td><td style="text-align: right;">69.0</td></tr>
</tbody>
</table>
</div>

<div class="nobreak" markdown="1">
### Итоги в разрезе групп

| Группа поддержки            |  Объём |   ИП |   ЛП |  Точность % |Полнота % |
|:----------------------------|-------:|-----:|-----:|------------:|---------:|
| Первая линия сопровождения  |    527 |  422 |   81 |          84 |       80 |
| НСИ                         |    380 |  352 |   15 |          96 |       93 |
| МНСИ                        |    254 |  231 |    5 |          98 |       91 |
| АСУИИиК                     |    191 |    0 |    0 |           - |        0 |
| АиЦФ, Развитие АСУ Договоры |    181 |  123 |   16 |          88 |       68 |
| АС ВКИП                     |     68 |    0 |    0 |           - |        0 |
| АСУ ДИиВПИ                  |     31 |    0 |    0 |           - |        0 |
| КИСУ Закупки                |     27 |   23 |    3 |          88 |       85 |
| АСПБ                        |      7 |    6 |    0 |         100 |       86 |

Классификатор не выполнял назначений на группы _АС ВКИП_ и _АСУ ДИиВПИ_ по причине
того, что ещё не накоплено достаточного количества данных для их надёжной дифферинциации.
</div>

<div class="nobreak" markdown="1">
### Влияние классификатора на время назначения

![Время назначения](https://eldargab.github.io/stuff/assignment_time.svg)

Среднее время назначения обращений во время ОПЭ было на 2 минуты меньше
по сравнению с контрольной неделей 20 - 24 августа.
</div>

{:.break-before}
# Заключение

Статистические классификаторы естественных текстов могут эффективно
работать в условиях близких и пересекающихся категорий, которые
даже от человека требуют определённых знаний и квалификации.

Экономическая выгода от внедрения автоматической классификации
сильно зависит от специфики деятельности компании и, зачастую,
может быть выявлена только в результате опытной эксплуатации.
